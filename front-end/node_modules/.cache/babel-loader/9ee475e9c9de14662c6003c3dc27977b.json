{"ast":null,"code":"import postBox from \"@/components/posts/PostBox.vue\";\nimport axios from \"axios\";\nimport config from \"../axios-config\";\nexport default {\n  name: \"UserView\",\n  props: [\"user\"],\n  emits: [\"update-user\"],\n  components: {\n    postBox\n  },\n\n  data() {\n    return {\n      pageUser: null,\n      posts: [],\n      isNotFound: false,\n      userId: -1\n    };\n  },\n\n  watch: {\n    \"$route.params.id\": function () {\n      this.loadData();\n    }\n  },\n  methods: {\n    loadData() {\n      if (this.$route.name == \"user\") {\n        //Mise à jour de l'utilisateur demandé\n        this.userId = this.$route.params.id; //Obtention de l'utilisateur demandé\n\n        axios.get(\"http://localhost:8000/api/user/\" + this.userId, config).then(response => {\n          if (response.status == 200) {\n            this.pageUser = JSON.parse(response.data); //Obtention des posts\n\n            axios.get(\"http://localhost:8000/api/post/getallposts/\" + this.userId, config).then(response => {\n              this.isNotFound = false;\n              const posts = response.data;\n\n              if (posts) {\n                this.posts = posts.reverse();\n              } else {\n                this.noPost = true;\n              }\n            });\n          } else {\n            this.isNotFound = true;\n          }\n        }).catch(err => {\n          this.isNotFound = true;\n        });\n      }\n    }\n\n  },\n\n  beforeMount() {\n    this.loadData();\n  }\n\n};","map":{"version":3,"mappings":"AA+BA,OAAOA,OAAP,MAAoB,gCAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AAEA,eAAe;EACbC,IAAI,EAAE,UADO;EAEbC,KAAK,EAAE,CAAC,MAAD,CAFM;EAGbC,KAAK,EAAE,CAAC,aAAD,CAHM;EAIbC,UAAU,EAAE;IACVN;EADU,CAJC;;EAObO,IAAI,GAAG;IACL,OAAO;MACLC,QAAQ,EAAE,IADL;MAELC,KAAK,EAAE,EAFF;MAGLC,UAAU,EAAE,KAHP;MAILC,MAAM,EAAE,CAAC;IAJJ,CAAP;EAMD,CAdY;;EAebC,KAAK,EAAE;IACL,oBAAoB,YAAY;MAC9B,KAAKC,QAAL;IACD;EAHI,CAfM;EAoBbC,OAAO,EAAE;IACPD,QAAQ,GAAG;MACT,IAAI,KAAKE,MAAL,CAAYZ,IAAZ,IAAoB,MAAxB,EAAgC;QAC9B;QACA,KAAKQ,MAAL,GAAc,KAAKI,MAAL,CAAYC,MAAZ,CAAmBC,EAAjC,CAF8B,CAI9B;;QACAhB,KAAI,CACDiB,GADH,CACO,oCAAoC,KAAKP,MADhD,EACwDT,MADxD,EAEGiB,IAFH,CAESC,QAAD,IAAc;UAClB,IAAIA,QAAQ,CAACC,MAAT,IAAmB,GAAvB,EAA4B;YAC1B,KAAKb,QAAL,GAAgBc,IAAI,CAACC,KAAL,CAAWH,QAAQ,CAACb,IAApB,CAAhB,CAD0B,CAG1B;;YACAN,KAAI,CACDiB,GADH,CAEI,gDAAgD,KAAKP,MAFzD,EAGIT,MAHJ,EAKGiB,IALH,CAKSC,QAAD,IAAc;cAClB,KAAKV,UAAL,GAAkB,KAAlB;cACA,MAAMD,KAAI,GAAIW,QAAQ,CAACb,IAAvB;;cAEA,IAAIE,KAAJ,EAAW;gBACT,KAAKA,KAAL,GAAaA,KAAK,CAACe,OAAN,EAAb;cACF,CAFA,MAEO;gBACL,KAAKC,MAAL,GAAc,IAAd;cACF;YACD,CAdH;UAeF,CAnBA,MAmBO;YACL,KAAKf,UAAL,GAAkB,IAAlB;UACF;QACD,CAzBH,EA0BGgB,KA1BH,CA0BUC,GAAD,IAAS;UACd,KAAKjB,UAAL,GAAkB,IAAlB;QACD,CA5BH;MA6BF;IACD;;EArCM,CApBI;;EA2DbkB,WAAW,GAAG;IACZ,KAAKf,QAAL;EACD;;AA7DY,CAAf","names":["postBox","axios","config","name","props","emits","components","data","pageUser","posts","isNotFound","userId","watch","loadData","methods","$route","params","id","get","then","response","status","JSON","parse","reverse","noPost","catch","err","beforeMount"],"sourceRoot":"","sources":["C:\\Users\\Wilfre\\Desktop\\OC P7\\front-end\\src\\views\\UserView.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-content\">\r\n    <div v-if=\"pageUser && !isNotFound\" class=\"user-infobox\">\r\n      <!--IMAGE-->\r\n      <img\r\n        v-bind:src=\"`${pageUser.profilePic}`\"\r\n        alt=\"Utilisateur {{pageUser.prenom}} {{pageUser.nom}}\"\r\n      />\r\n      <div class=\"user-infobox__infos\">\r\n        <h3>{{ pageUser.prenom }} {{ pageUser.nom }}</h3>\r\n        <h4>A propos de {{ pageUser.prenom }}:</h4>\r\n        <p>{{ pageUser.description }}</p>\r\n      </div>\r\n      <!--INFO COLUMN-->\r\n    </div>\r\n    <div v-if=\"pageUser && !isNotFound\" class=\"post_container\" v-cloak>\r\n      <h3>Publications de {{ pageUser.prenom }} {{ pageUser.nom }}</h3>\r\n      <postBox\r\n        v-for=\"(post, i) in posts\"\r\n        :key=\"i\"\r\n        v-bind:post=\"posts[i]\"\r\n        v-bind:user=\"pageUser\"\r\n      />\r\n    </div>\r\n    <div v-if=\"isNotFound\" class=\"post_container\">\r\n      <h1>This user does not exist</h1>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport postBox from \"@/components/posts/PostBox.vue\";\r\nimport axios from \"axios\";\r\nimport config from \"../axios-config\";\r\n\r\nexport default {\r\n  name: \"UserView\",\r\n  props: [\"user\"],\r\n  emits: [\"update-user\"],\r\n  components: {\r\n    postBox,\r\n  },\r\n  data() {\r\n    return {\r\n      pageUser: null,\r\n      posts: [],\r\n      isNotFound: false,\r\n      userId: -1,\r\n    };\r\n  },\r\n  watch: {\r\n    \"$route.params.id\": function () {\r\n      this.loadData();\r\n    },\r\n  },\r\n  methods: {\r\n    loadData() {\r\n      if (this.$route.name == \"user\") {\r\n        //Mise à jour de l'utilisateur demandé\r\n        this.userId = this.$route.params.id;\r\n\r\n        //Obtention de l'utilisateur demandé\r\n        axios\r\n          .get(\"http://localhost:8000/api/user/\" + this.userId, config)\r\n          .then((response) => {\r\n            if (response.status == 200) {\r\n              this.pageUser = JSON.parse(response.data);\r\n\r\n              //Obtention des posts\r\n              axios\r\n                .get(\r\n                  \"http://localhost:8000/api/post/getallposts/\" + this.userId,\r\n                  config\r\n                )\r\n                .then((response) => {\r\n                  this.isNotFound = false;\r\n                  const posts = response.data;\r\n\r\n                  if (posts) {\r\n                    this.posts = posts.reverse();\r\n                  } else {\r\n                    this.noPost = true;\r\n                  }\r\n                });\r\n            } else {\r\n              this.isNotFound = true;\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            this.isNotFound = true;\r\n          });\r\n      }\r\n    },\r\n  },\r\n  beforeMount() {\r\n    this.loadData();\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module"}