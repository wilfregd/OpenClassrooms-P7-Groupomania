{"ast":null,"code":"import axios from \"axios\";\nimport config from \"../axios-config\";\nexport default {\n  name: \"SettingsView\",\n  props: [\"user\"],\n  emits: [\"update-user\"],\n\n  data() {\n    return {\n      userNom: \"\",\n      userPrenom: \"\",\n      userDescription: \"\",\n      formFile: null\n    };\n  },\n\n  methods: {\n    onUploadImage(e) {\n      this.formFile = e.target.files[0];\n    },\n\n    onUpdateUserInfo() {\n      const formData = new FormData();\n      formData.append(\"id\", this.user.id);\n      formData.append(\"nom\", this.userNom);\n      formData.append(\"prenom\", this.userPrenom);\n      formData.append(\"description\", this.userDescription);\n\n      if (this.formFile != null) {\n        formData.append(\"profilePic\", this.formFile, this.formFile.name);\n      }\n\n      axios.put(\"http://localhost:8000/api/user/updateuser\", formData, config).then(response => {\n        if (response.status == 200) {\n          this.$emit(\"update-user\", {\n            nom: response.data.nom,\n            prenom: response.data.prenom,\n            description: response.data.description,\n            profilePic: response.data.profilePic\n          });\n          console.log(response);\n        }\n      }).catch(err => console.log(err));\n    }\n\n  },\n\n  created() {\n    this.userNom = this.user.nom;\n    this.userPrenom = this.user.prenom;\n    this.userDescription = this.user.description;\n  }\n\n};","map":{"version":3,"mappings":"AAyCA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AAEA,eAAe;EACbC,IAAI,EAAE,cADO;EAEbC,KAAK,EAAE,CAAC,MAAD,CAFM;EAGbC,KAAK,EAAE,CAAC,aAAD,CAHM;;EAIbC,IAAI,GAAG;IACL,OAAO;MACLC,OAAO,EAAE,EADJ;MAELC,UAAU,EAAE,EAFP;MAGLC,eAAe,EAAE,EAHZ;MAILC,QAAQ,EAAE;IAJL,CAAP;EAMD,CAXY;;EAYbC,OAAO,EAAE;IACPC,aAAa,CAACC,CAAD,EAAI;MACf,KAAKH,QAAL,GAAgBG,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAhB;IACD,CAHM;;IAIPC,gBAAgB,GAAG;MACjB,MAAMC,QAAO,GAAI,IAAIC,QAAJ,EAAjB;MACAD,QAAQ,CAACE,MAAT,CAAgB,IAAhB,EAAsB,KAAKC,IAAL,CAAUC,EAAhC;MACAJ,QAAQ,CAACE,MAAT,CAAgB,KAAhB,EAAuB,KAAKZ,OAA5B;MACAU,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0B,KAAKX,UAA/B;MACAS,QAAQ,CAACE,MAAT,CAAgB,aAAhB,EAA+B,KAAKV,eAApC;;MAEA,IAAI,KAAKC,QAAL,IAAiB,IAArB,EAA2B;QACzBO,QAAQ,CAACE,MAAT,CAAgB,YAAhB,EAA8B,KAAKT,QAAnC,EAA6C,KAAKA,QAAL,CAAcP,IAA3D;MACF;;MAEAF,KAAI,CACDqB,GADH,CACO,2CADP,EACoDL,QADpD,EAC8Df,MAD9D,EAEGqB,IAFH,CAESC,QAAD,IAAc;QAClB,IAAIA,QAAQ,CAACC,MAAT,IAAmB,GAAvB,EAA4B;UAC1B,KAAKC,KAAL,CAAW,aAAX,EAA0B;YACxBC,GAAG,EAAEH,QAAQ,CAAClB,IAAT,CAAcqB,GADK;YAExBC,MAAM,EAAEJ,QAAQ,CAAClB,IAAT,CAAcsB,MAFE;YAGxBC,WAAW,EAAEL,QAAQ,CAAClB,IAAT,CAAcuB,WAHH;YAIxBC,UAAU,EAAEN,QAAQ,CAAClB,IAAT,CAAcwB;UAJF,CAA1B;UAMAC,OAAO,CAACC,GAAR,CAAYR,QAAZ;QACF;MACD,CAZH,EAaGS,KAbH,CAaUC,GAAD,IAASH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAblB;IAcD;;EA7BM,CAZI;;EA2CbC,OAAO,GAAG;IACR,KAAK5B,OAAL,GAAe,KAAKa,IAAL,CAAUO,GAAzB;IACA,KAAKnB,UAAL,GAAkB,KAAKY,IAAL,CAAUQ,MAA5B;IACA,KAAKnB,eAAL,GAAuB,KAAKW,IAAL,CAAUS,WAAjC;EACD;;AA/CY,CAAf","names":["axios","config","name","props","emits","data","userNom","userPrenom","userDescription","formFile","methods","onUploadImage","e","target","files","onUpdateUserInfo","formData","FormData","append","user","id","put","then","response","status","$emit","nom","prenom","description","profilePic","console","log","catch","err","created"],"sourceRoot":"","sources":["C:\\Users\\Wilfre\\Desktop\\OC P7\\front-end\\src\\views\\SettingsView.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-content\">\r\n    <form v-if=\"user\" class=\"settings-form\">\r\n      <h3>Paramètres de {{ user.prenom }}</h3>\r\n      <h5>Nom</h5>\r\n      <input\r\n        class=\"settings-input\"\r\n        v-model=\"userNom\"\r\n        type=\"text\"\r\n        placeholder=\"nom\"\r\n      />\r\n      <h5>Prénom</h5>\r\n      <input\r\n        class=\"settings-input\"\r\n        v-model=\"userPrenom\"\r\n        type=\"text\"\r\n        placeholder=\"prenom\"\r\n      />\r\n      <h5>Description</h5>\r\n      <textarea\r\n        class=\"settings-input\"\r\n        v-model=\"userDescription\"\r\n        placeholder=\"description\"\r\n      />\r\n      <div class=\"settings-picture\">\r\n        <h5>Image de profil</h5>\r\n        <input @change=\"onUploadImage\" type=\"file\" accept=\".jpg,.jpeg,.png\" />\r\n        <img\r\n          v-if=\"user.profilePic\"\r\n          v-bind:src=\"`${user.profilePic}`\"\r\n          alt=\"Utilisateur {{user.prenom}} {{user.nom}}\"\r\n        />\r\n      </div>\r\n      <button class=\"btn\" @click.prevent=\"onUpdateUserInfo\">\r\n        Modifier les informations\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport config from \"../axios-config\";\r\n\r\nexport default {\r\n  name: \"SettingsView\",\r\n  props: [\"user\"],\r\n  emits: [\"update-user\"],\r\n  data() {\r\n    return {\r\n      userNom: \"\",\r\n      userPrenom: \"\",\r\n      userDescription: \"\",\r\n      formFile: null,\r\n    };\r\n  },\r\n  methods: {\r\n    onUploadImage(e) {\r\n      this.formFile = e.target.files[0];\r\n    },\r\n    onUpdateUserInfo() {\r\n      const formData = new FormData();\r\n      formData.append(\"id\", this.user.id);\r\n      formData.append(\"nom\", this.userNom);\r\n      formData.append(\"prenom\", this.userPrenom);\r\n      formData.append(\"description\", this.userDescription);\r\n\r\n      if (this.formFile != null) {\r\n        formData.append(\"profilePic\", this.formFile, this.formFile.name);\r\n      }\r\n\r\n      axios\r\n        .put(\"http://localhost:8000/api/user/updateuser\", formData, config)\r\n        .then((response) => {\r\n          if (response.status == 200) {\r\n            this.$emit(\"update-user\", {\r\n              nom: response.data.nom,\r\n              prenom: response.data.prenom,\r\n              description: response.data.description,\r\n              profilePic: response.data.profilePic,\r\n            });\r\n            console.log(response);\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n  },\r\n  created() {\r\n    this.userNom = this.user.nom;\r\n    this.userPrenom = this.user.prenom;\r\n    this.userDescription = this.user.description;\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module"}