{"ast":null,"code":"import postBox from \"@/components/posts/PostBox.vue\";\nimport axios from \"axios\";\nimport config from \"../axios-config\";\nexport default {\n  name: \"UserView\",\n  props: [\"user\"],\n  emits: [\"update-user\"],\n  components: {\n    postBox\n  },\n\n  data() {\n    return {\n      pageUser: null,\n      posts: [],\n      isNotFound: false,\n      userId: -1\n    };\n  },\n\n  methods: {\n    updateUserPage() {\n      //Obtention de l'utilisateur demandé\n      this.userId = this.$route.params.id;\n      axios.get(\"http://localhost:8000/api/user/\" + this.userId, config).then(response => {\n        if (response.status == 200) {\n          this.pageUser = JSON.parse(response.data); //Obtention des posts\n\n          axios.get(\"http://localhost:8000/api/post/getallposts/\" + this.userId, config).then(response => {\n            this.isNotFound = false;\n            const posts = response.data;\n\n            if (posts) {\n              this.posts = posts.reverse();\n            } else {\n              this.noPost = true;\n            }\n          });\n        } else {\n          this.isNotFound = true;\n        }\n      }).catch(err => {\n        this.isNotFound = true;\n        console.log(err);\n      });\n    }\n\n  },\n  watch: {\n    \"$route.params.id\": {\n      handler() {\n        this.userId = this.$route.params.id;\n        this.updateUserPage();\n      }\n\n    }\n  },\n\n  beforeCreate() {\n    this.userId = this.$route.params.id;\n    this.updateUserPage();\n  }\n\n};","map":{"version":3,"mappings":"AA+BA,OAAOA,OAAP,MAAoB,gCAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AAEA,eAAe;EACbC,IAAI,EAAE,UADO;EAEbC,KAAK,EAAE,CAAC,MAAD,CAFM;EAGbC,KAAK,EAAE,CAAC,aAAD,CAHM;EAIbC,UAAU,EAAE;IACVN;EADU,CAJC;;EAObO,IAAI,GAAG;IACL,OAAO;MACLC,QAAQ,EAAE,IADL;MAELC,KAAK,EAAE,EAFF;MAGLC,UAAU,EAAE,KAHP;MAILC,MAAM,EAAE,CAAC;IAJJ,CAAP;EAMD,CAdY;;EAebC,OAAO,EAAE;IACPC,cAAc,GAAG;MACf;MACA,KAAKF,MAAL,GAAc,KAAKG,MAAL,CAAYC,MAAZ,CAAmBC,EAAjC;MACAf,KAAI,CACDgB,GADH,CACO,oCAAoC,KAAKN,MADhD,EACwDT,MADxD,EAEGgB,IAFH,CAESC,QAAD,IAAc;QAClB,IAAIA,QAAQ,CAACC,MAAT,IAAmB,GAAvB,EAA4B;UAC1B,KAAKZ,QAAL,GAAgBa,IAAI,CAACC,KAAL,CAAWH,QAAQ,CAACZ,IAApB,CAAhB,CAD0B,CAG1B;;UACAN,KAAI,CACDgB,GADH,CAEI,gDAAgD,KAAKN,MAFzD,EAGIT,MAHJ,EAKGgB,IALH,CAKSC,QAAD,IAAc;YAClB,KAAKT,UAAL,GAAkB,KAAlB;YACA,MAAMD,KAAI,GAAIU,QAAQ,CAACZ,IAAvB;;YAEA,IAAIE,KAAJ,EAAW;cACT,KAAKA,KAAL,GAAaA,KAAK,CAACc,OAAN,EAAb;YACF,CAFA,MAEO;cACL,KAAKC,MAAL,GAAc,IAAd;YACF;UACD,CAdH;QAeF,CAnBA,MAmBO;UACL,KAAKd,UAAL,GAAkB,IAAlB;QACF;MACD,CAzBH,EA0BGe,KA1BH,CA0BUC,GAAD,IAAS;QACd,KAAKhB,UAAL,GAAkB,IAAlB;QACAiB,OAAO,CAACC,GAAR,CAAYF,GAAZ;MACD,CA7BH;IA8BD;;EAlCM,CAfI;EAmDbG,KAAK,EAAE;IACL,oBAAoB;MAClBC,OAAO,GAAG;QACR,KAAKnB,MAAL,GAAc,KAAKG,MAAL,CAAYC,MAAZ,CAAmBC,EAAjC;QACA,KAAKH,cAAL;MACD;;IAJiB;EADf,CAnDM;;EA2DbkB,YAAY,GAAG;IACb,KAAKpB,MAAL,GAAc,KAAKG,MAAL,CAAYC,MAAZ,CAAmBC,EAAjC;IACA,KAAKH,cAAL;EACD;;AA9DY,CAAf","names":["postBox","axios","config","name","props","emits","components","data","pageUser","posts","isNotFound","userId","methods","updateUserPage","$route","params","id","get","then","response","status","JSON","parse","reverse","noPost","catch","err","console","log","watch","handler","beforeCreate"],"sourceRoot":"","sources":["C:\\Users\\Wilfre\\Desktop\\OC P7\\front-end\\src\\views\\UserView.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-content\">\r\n    <div v-if=\"pageUser && !isNotFound\" class=\"user-infobox\">\r\n      <!--IMAGE-->\r\n      <img\r\n        v-bind:src=\"`${pageUser.profilePic}`\"\r\n        alt=\"Utilisateur {{pageUser.prenom}} {{pageUser.nom}}\"\r\n      />\r\n      <div class=\"user-infobox__infos\">\r\n        <h3>{{ pageUser.prenom }} {{ pageUser.nom }}</h3>\r\n        <h4>A propos de {{ pageUser.prenom }}:</h4>\r\n        <p>{{ pageUser.description }}</p>\r\n      </div>\r\n      <!--INFO COLUMN-->\r\n    </div>\r\n    <div v-if=\"pageUser && !isNotFound\" class=\"post_container\" v-cloak>\r\n      <h3>Publications de {{ pageUser.prenom }} {{ pageUser.nom }}</h3>\r\n      <postBox\r\n        v-for=\"(post, i) in posts\"\r\n        :key=\"i\"\r\n        v-bind:post=\"posts[i]\"\r\n        v-bind:user=\"pageUser\"\r\n      />\r\n    </div>\r\n    <div v-if=\"isNotFound\" class=\"post_container\">\r\n      <h1>This user does not exist</h1>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport postBox from \"@/components/posts/PostBox.vue\";\r\nimport axios from \"axios\";\r\nimport config from \"../axios-config\";\r\n\r\nexport default {\r\n  name: \"UserView\",\r\n  props: [\"user\"],\r\n  emits: [\"update-user\"],\r\n  components: {\r\n    postBox,\r\n  },\r\n  data() {\r\n    return {\r\n      pageUser: null,\r\n      posts: [],\r\n      isNotFound: false,\r\n      userId: -1,\r\n    };\r\n  },\r\n  methods: {\r\n    updateUserPage() {\r\n      //Obtention de l'utilisateur demandé\r\n      this.userId = this.$route.params.id;\r\n      axios\r\n        .get(\"http://localhost:8000/api/user/\" + this.userId, config)\r\n        .then((response) => {\r\n          if (response.status == 200) {\r\n            this.pageUser = JSON.parse(response.data);\r\n\r\n            //Obtention des posts\r\n            axios\r\n              .get(\r\n                \"http://localhost:8000/api/post/getallposts/\" + this.userId,\r\n                config\r\n              )\r\n              .then((response) => {\r\n                this.isNotFound = false;\r\n                const posts = response.data;\r\n\r\n                if (posts) {\r\n                  this.posts = posts.reverse();\r\n                } else {\r\n                  this.noPost = true;\r\n                }\r\n              });\r\n          } else {\r\n            this.isNotFound = true;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          this.isNotFound = true;\r\n          console.log(err);\r\n        });\r\n    },\r\n  },\r\n  watch: {\r\n    \"$route.params.id\": {\r\n      handler() {\r\n        this.userId = this.$route.params.id;\r\n        this.updateUserPage();\r\n      },\r\n    },\r\n  },\r\n  beforeCreate() {\r\n    this.userId = this.$route.params.id;\r\n    this.updateUserPage();\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module"}