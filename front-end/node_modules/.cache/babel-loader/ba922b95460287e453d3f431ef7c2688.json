{"ast":null,"code":"import axios from \"axios\";\nimport config from \"../axios-config\";\nexport default {\n  name: \"SettingsView\",\n  props: [\"user\"],\n  emits: [\"update-user\"],\n\n  data() {\n    return {\n      userNom: \"\",\n      userPrenom: \"\",\n      userDescription: \"\",\n      formFile: null\n    };\n  },\n\n  methods: {\n    onUploadImage(e) {\n      this.formFile = e.target.files[0];\n    },\n\n    onDeleteUser() {\n      axios.post(\"http://localhost:8000/api/user/deleteaccount\", {\n        id: this.user.id\n      }, config).then(response => {\n        if (response.status == 200) {\n          this.$router.push(\"/auth\");\n        }\n      }).catch(err => console.log(err));\n    },\n\n    onUpdateUserInfo() {\n      const formData = new FormData();\n      formData.append(\"id\", this.user.id);\n      formData.append(\"nom\", this.userNom);\n      formData.append(\"prenom\", this.userPrenom);\n      formData.append(\"description\", this.userDescription);\n\n      if (this.formFile != null) {\n        formData.append(\"image\", this.formFile, this.formFile.name);\n      }\n\n      axios.put(\"http://localhost:8000/api/user/updateuser\", formData, config).then(response => {\n        if (response.status == 200) {\n          const userData = {\n            id: response.data.id,\n            nom: response.data.nom,\n            prenom: response.data.prenom,\n            description: response.data.description,\n            profilePic: response.data.profilePic\n          };\n          this.$emit(\"update-user\", userData);\n        }\n      }).catch(err => console.log(err));\n    }\n\n  },\n\n  created() {\n    this.userNom = this.user.nom;\n    this.userPrenom = this.user.prenom;\n    this.userDescription = this.user.description;\n  }\n\n};","map":{"version":3,"mappings":"AA4CA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AAEA,eAAe;EACbC,IAAI,EAAE,cADO;EAEbC,KAAK,EAAE,CAAC,MAAD,CAFM;EAGbC,KAAK,EAAE,CAAC,aAAD,CAHM;;EAIbC,IAAI,GAAG;IACL,OAAO;MACLC,OAAO,EAAE,EADJ;MAELC,UAAU,EAAE,EAFP;MAGLC,eAAe,EAAE,EAHZ;MAILC,QAAQ,EAAE;IAJL,CAAP;EAMD,CAXY;;EAYbC,OAAO,EAAE;IACPC,aAAa,CAACC,CAAD,EAAI;MACf,KAAKH,QAAL,GAAgBG,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAhB;IACD,CAHM;;IAIPC,YAAY,GAAG;MACbf,KAAI,CACDgB,IADH,CAEI,8CAFJ,EAGI;QAAEC,EAAE,EAAE,KAAKC,IAAL,CAAUD;MAAhB,CAHJ,EAIIhB,MAJJ,EAMGkB,IANH,CAMSC,QAAD,IAAc;QAClB,IAAIA,QAAQ,CAACC,MAAT,IAAmB,GAAvB,EAA4B;UAC1B,KAAKC,OAAL,CAAaC,IAAb,CAAkB,OAAlB;QACF;MACD,CAVH,EAWGC,KAXH,CAWUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAXlB;IAYD,CAjBM;;IAkBPG,gBAAgB,GAAG;MACjB,MAAMC,QAAO,GAAI,IAAIC,QAAJ,EAAjB;MACAD,QAAQ,CAACE,MAAT,CAAgB,IAAhB,EAAsB,KAAKb,IAAL,CAAUD,EAAhC;MACAY,QAAQ,CAACE,MAAT,CAAgB,KAAhB,EAAuB,KAAKzB,OAA5B;MACAuB,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0B,KAAKxB,UAA/B;MACAsB,QAAQ,CAACE,MAAT,CAAgB,aAAhB,EAA+B,KAAKvB,eAApC;;MAEA,IAAI,KAAKC,QAAL,IAAiB,IAArB,EAA2B;QACzBoB,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyB,KAAKtB,QAA9B,EAAwC,KAAKA,QAAL,CAAcP,IAAtD;MACF;;MAEAF,KAAI,CACDgC,GADH,CACO,2CADP,EACoDH,QADpD,EAC8D5B,MAD9D,EAEGkB,IAFH,CAESC,QAAD,IAAc;QAClB,IAAIA,QAAQ,CAACC,MAAT,IAAmB,GAAvB,EAA4B;UAC1B,MAAMY,QAAO,GAAI;YACfhB,EAAE,EAAEG,QAAQ,CAACf,IAAT,CAAcY,EADH;YAEfiB,GAAG,EAAEd,QAAQ,CAACf,IAAT,CAAc6B,GAFJ;YAGfC,MAAM,EAAEf,QAAQ,CAACf,IAAT,CAAc8B,MAHP;YAIfC,WAAW,EAAEhB,QAAQ,CAACf,IAAT,CAAc+B,WAJZ;YAKfC,UAAU,EAAEjB,QAAQ,CAACf,IAAT,CAAcgC;UALX,CAAjB;UAQA,KAAKC,KAAL,CAAW,aAAX,EAA0BL,QAA1B;QACF;MACD,CAdH,EAeGT,KAfH,CAeUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAflB;IAgBD;;EA7CM,CAZI;;EA2Dbc,OAAO,GAAG;IACR,KAAKjC,OAAL,GAAe,KAAKY,IAAL,CAAUgB,GAAzB;IACA,KAAK3B,UAAL,GAAkB,KAAKW,IAAL,CAAUiB,MAA5B;IACA,KAAK3B,eAAL,GAAuB,KAAKU,IAAL,CAAUkB,WAAjC;EACD;;AA/DY,CAAf","names":["axios","config","name","props","emits","data","userNom","userPrenom","userDescription","formFile","methods","onUploadImage","e","target","files","onDeleteUser","post","id","user","then","response","status","$router","push","catch","err","console","log","onUpdateUserInfo","formData","FormData","append","put","userData","nom","prenom","description","profilePic","$emit","created"],"sourceRoot":"","sources":["C:\\Users\\Wilfre\\Desktop\\OC P7\\front-end\\src\\views\\SettingsView.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-content\">\r\n    <form v-if=\"user\" class=\"settings-form\">\r\n      <h3>Paramètres de {{ user.prenom }}</h3>\r\n      <h5>Nom</h5>\r\n      <input\r\n        class=\"settings-input\"\r\n        v-model=\"userNom\"\r\n        type=\"text\"\r\n        placeholder=\"nom\"\r\n      />\r\n      <h5>Prénom</h5>\r\n      <input\r\n        class=\"settings-input\"\r\n        v-model=\"userPrenom\"\r\n        type=\"text\"\r\n        placeholder=\"prenom\"\r\n      />\r\n      <h5>Description</h5>\r\n      <textarea\r\n        class=\"settings-input\"\r\n        v-model=\"userDescription\"\r\n        placeholder=\"description\"\r\n      />\r\n      <div class=\"settings-picture\">\r\n        <h5>Image de profil</h5>\r\n        <input @change=\"onUploadImage\" type=\"file\" accept=\".jpg,.jpeg,.png\" />\r\n        <img\r\n          v-if=\"user.profilePic\"\r\n          v-bind:src=\"`${user.profilePic}`\"\r\n          alt=\"Utilisateur {{user.prenom}} {{user.nom}}\"\r\n        />\r\n      </div>\r\n      <button class=\"btn\" @click.prevent=\"onUpdateUserInfo\">\r\n        Modifier les informations\r\n      </button>\r\n      <button class=\"btn btn--red btn--right\" @click.prevent=\"onDeleteUser\">\r\n        Supprimer le compte\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport config from \"../axios-config\";\r\n\r\nexport default {\r\n  name: \"SettingsView\",\r\n  props: [\"user\"],\r\n  emits: [\"update-user\"],\r\n  data() {\r\n    return {\r\n      userNom: \"\",\r\n      userPrenom: \"\",\r\n      userDescription: \"\",\r\n      formFile: null,\r\n    };\r\n  },\r\n  methods: {\r\n    onUploadImage(e) {\r\n      this.formFile = e.target.files[0];\r\n    },\r\n    onDeleteUser() {\r\n      axios\r\n        .post(\r\n          \"http://localhost:8000/api/user/deleteaccount\",\r\n          { id: this.user.id },\r\n          config\r\n        )\r\n        .then((response) => {\r\n          if (response.status == 200) {\r\n            this.$router.push(\"/auth\");\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n    onUpdateUserInfo() {\r\n      const formData = new FormData();\r\n      formData.append(\"id\", this.user.id);\r\n      formData.append(\"nom\", this.userNom);\r\n      formData.append(\"prenom\", this.userPrenom);\r\n      formData.append(\"description\", this.userDescription);\r\n\r\n      if (this.formFile != null) {\r\n        formData.append(\"image\", this.formFile, this.formFile.name);\r\n      }\r\n\r\n      axios\r\n        .put(\"http://localhost:8000/api/user/updateuser\", formData, config)\r\n        .then((response) => {\r\n          if (response.status == 200) {\r\n            const userData = {\r\n              id: response.data.id,\r\n              nom: response.data.nom,\r\n              prenom: response.data.prenom,\r\n              description: response.data.description,\r\n              profilePic: response.data.profilePic,\r\n            };\r\n\r\n            this.$emit(\"update-user\", userData);\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n  },\r\n  created() {\r\n    this.userNom = this.user.nom;\r\n    this.userPrenom = this.user.prenom;\r\n    this.userDescription = this.user.description;\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module"}