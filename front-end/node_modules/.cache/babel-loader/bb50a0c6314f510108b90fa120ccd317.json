{"ast":null,"code":"import axios from \"axios\";\nimport config from \"../axios-config\";\nexport default {\n  name: \"SettingsView\",\n  props: [\"user\"],\n  emits: [\"update-user\"],\n\n  data() {\n    return {\n      userNom: \"\",\n      userPrenom: \"\",\n      userDescription: \"\",\n      formFile: null\n    };\n  },\n\n  methods: {\n    onUploadImage(e) {\n      this.formFile = e.target.files[0];\n    },\n\n    onDeleteUser() {},\n\n    onUpdateUserInfo() {\n      const formData = new FormData();\n      formData.append(\"id\", this.user.id);\n      formData.append(\"nom\", this.userNom);\n      formData.append(\"prenom\", this.userPrenom);\n      formData.append(\"description\", this.userDescription);\n\n      if (this.formFile != null) {\n        formData.append(\"image\", this.formFile, this.formFile.name);\n      }\n\n      axios.put(\"http://localhost:8000/api/user/updateuser\", formData, config).then(response => {\n        if (response.status == 200) {\n          const userData = {\n            id: response.data.id,\n            nom: response.data.nom,\n            prenom: response.data.prenom,\n            description: response.data.description,\n            profilePic: response.data.profilePic\n          };\n          this.$emit(\"update-user\", userData);\n        }\n      }).catch(err => console.log(err));\n    }\n\n  },\n\n  created() {\n    this.userNom = this.user.nom;\n    this.userPrenom = this.user.prenom;\n    this.userDescription = this.user.description;\n  }\n\n};","map":{"version":3,"mappings":"AA4CA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AAEA,eAAe;EACbC,IAAI,EAAE,cADO;EAEbC,KAAK,EAAE,CAAC,MAAD,CAFM;EAGbC,KAAK,EAAE,CAAC,aAAD,CAHM;;EAIbC,IAAI,GAAG;IACL,OAAO;MACLC,OAAO,EAAE,EADJ;MAELC,UAAU,EAAE,EAFP;MAGLC,eAAe,EAAE,EAHZ;MAILC,QAAQ,EAAE;IAJL,CAAP;EAMD,CAXY;;EAYbC,OAAO,EAAE;IACPC,aAAa,CAACC,CAAD,EAAI;MACf,KAAKH,QAAL,GAAgBG,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAhB;IACD,CAHM;;IAIPC,YAAY,GAAG,CAAE,CAJV;;IAKPC,gBAAgB,GAAG;MACjB,MAAMC,QAAO,GAAI,IAAIC,QAAJ,EAAjB;MACAD,QAAQ,CAACE,MAAT,CAAgB,IAAhB,EAAsB,KAAKC,IAAL,CAAUC,EAAhC;MACAJ,QAAQ,CAACE,MAAT,CAAgB,KAAhB,EAAuB,KAAKb,OAA5B;MACAW,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0B,KAAKZ,UAA/B;MACAU,QAAQ,CAACE,MAAT,CAAgB,aAAhB,EAA+B,KAAKX,eAApC;;MAEA,IAAI,KAAKC,QAAL,IAAiB,IAArB,EAA2B;QACzBQ,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyB,KAAKV,QAA9B,EAAwC,KAAKA,QAAL,CAAcP,IAAtD;MACF;;MAEAF,KAAI,CACDsB,GADH,CACO,2CADP,EACoDL,QADpD,EAC8DhB,MAD9D,EAEGsB,IAFH,CAESC,QAAD,IAAc;QAClB,IAAIA,QAAQ,CAACC,MAAT,IAAmB,GAAvB,EAA4B;UAC1B,MAAMC,QAAO,GAAI;YACfL,EAAE,EAAEG,QAAQ,CAACnB,IAAT,CAAcgB,EADH;YAEfM,GAAG,EAAEH,QAAQ,CAACnB,IAAT,CAAcsB,GAFJ;YAGfC,MAAM,EAAEJ,QAAQ,CAACnB,IAAT,CAAcuB,MAHP;YAIfC,WAAW,EAAEL,QAAQ,CAACnB,IAAT,CAAcwB,WAJZ;YAKfC,UAAU,EAAEN,QAAQ,CAACnB,IAAT,CAAcyB;UALX,CAAjB;UAQA,KAAKC,KAAL,CAAW,aAAX,EAA0BL,QAA1B;QACF;MACD,CAdH,EAeGM,KAfH,CAeUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAflB;IAgBD;;EAhCM,CAZI;;EA8CbG,OAAO,GAAG;IACR,KAAK9B,OAAL,GAAe,KAAKc,IAAL,CAAUO,GAAzB;IACA,KAAKpB,UAAL,GAAkB,KAAKa,IAAL,CAAUQ,MAA5B;IACA,KAAKpB,eAAL,GAAuB,KAAKY,IAAL,CAAUS,WAAjC;EACD;;AAlDY,CAAf","names":["axios","config","name","props","emits","data","userNom","userPrenom","userDescription","formFile","methods","onUploadImage","e","target","files","onDeleteUser","onUpdateUserInfo","formData","FormData","append","user","id","put","then","response","status","userData","nom","prenom","description","profilePic","$emit","catch","err","console","log","created"],"sourceRoot":"","sources":["C:\\Users\\Wilfre\\Desktop\\OC P7\\front-end\\src\\views\\SettingsView.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-content\">\r\n    <form v-if=\"user\" class=\"settings-form\">\r\n      <h3>Paramètres de {{ user.prenom }}</h3>\r\n      <h5>Nom</h5>\r\n      <input\r\n        class=\"settings-input\"\r\n        v-model=\"userNom\"\r\n        type=\"text\"\r\n        placeholder=\"nom\"\r\n      />\r\n      <h5>Prénom</h5>\r\n      <input\r\n        class=\"settings-input\"\r\n        v-model=\"userPrenom\"\r\n        type=\"text\"\r\n        placeholder=\"prenom\"\r\n      />\r\n      <h5>Description</h5>\r\n      <textarea\r\n        class=\"settings-input\"\r\n        v-model=\"userDescription\"\r\n        placeholder=\"description\"\r\n      />\r\n      <div class=\"settings-picture\">\r\n        <h5>Image de profil</h5>\r\n        <input @change=\"onUploadImage\" type=\"file\" accept=\".jpg,.jpeg,.png\" />\r\n        <img\r\n          v-if=\"user.profilePic\"\r\n          v-bind:src=\"`${user.profilePic}`\"\r\n          alt=\"Utilisateur {{user.prenom}} {{user.nom}}\"\r\n        />\r\n      </div>\r\n      <button class=\"btn\" @click.prevent=\"onUpdateUserInfo\">\r\n        Modifier les informations\r\n      </button>\r\n      <button class=\"btn btn--red\" @click.prevent=\"onDeleteUser\">\r\n        Supprimer le compte\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport config from \"../axios-config\";\r\n\r\nexport default {\r\n  name: \"SettingsView\",\r\n  props: [\"user\"],\r\n  emits: [\"update-user\"],\r\n  data() {\r\n    return {\r\n      userNom: \"\",\r\n      userPrenom: \"\",\r\n      userDescription: \"\",\r\n      formFile: null,\r\n    };\r\n  },\r\n  methods: {\r\n    onUploadImage(e) {\r\n      this.formFile = e.target.files[0];\r\n    },\r\n    onDeleteUser() {},\r\n    onUpdateUserInfo() {\r\n      const formData = new FormData();\r\n      formData.append(\"id\", this.user.id);\r\n      formData.append(\"nom\", this.userNom);\r\n      formData.append(\"prenom\", this.userPrenom);\r\n      formData.append(\"description\", this.userDescription);\r\n\r\n      if (this.formFile != null) {\r\n        formData.append(\"image\", this.formFile, this.formFile.name);\r\n      }\r\n\r\n      axios\r\n        .put(\"http://localhost:8000/api/user/updateuser\", formData, config)\r\n        .then((response) => {\r\n          if (response.status == 200) {\r\n            const userData = {\r\n              id: response.data.id,\r\n              nom: response.data.nom,\r\n              prenom: response.data.prenom,\r\n              description: response.data.description,\r\n              profilePic: response.data.profilePic,\r\n            };\r\n\r\n            this.$emit(\"update-user\", userData);\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n  },\r\n  created() {\r\n    this.userNom = this.user.nom;\r\n    this.userPrenom = this.user.prenom;\r\n    this.userDescription = this.user.description;\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module"}