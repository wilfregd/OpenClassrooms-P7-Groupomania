{"ast":null,"code":"import axios from \"axios\";\nimport config from \"../axios-config\";\nexport default {\n  name: \"SettingsView\",\n  props: [\"user\"],\n  emits: [\"update-user\"],\n\n  data() {\n    return {\n      userInfo: null,\n      formFile: null\n    };\n  },\n\n  methods: {\n    onUploadImage(e) {\n      this.postFileEdit = e.target.files[0];\n    },\n\n    onUpdateUserInfo() {\n      const formData = new FormData();\n      formData.append(\"id\", this.user.id);\n      formData.append(\"nom\", this.userInfo.nom);\n      formData.append(\"prenom\", this.userInfo.prenom);\n      formData.append(\"description\", this.userInfo.description);\n\n      if (this.postFileEdit != null) {\n        formData.append(\"image\", this.formFile, this.formFile.name);\n      }\n\n      axios.put(\"http://localhost:8000/api/user/updateuser\", formData, config).then(response => {\n        if (response.status == 200) {\n          console.log(response);\n        }\n      }).catch(err => console.log(err));\n    }\n\n  },\n\n  created() {\n    this.userInfo = this.user;\n  }\n\n};","map":{"version":3,"mappings":"AAyCA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AAEA,eAAe;EACbC,IAAI,EAAE,cADO;EAEbC,KAAK,EAAE,CAAC,MAAD,CAFM;EAGbC,KAAK,EAAE,CAAC,aAAD,CAHM;;EAIbC,IAAI,GAAG;IACL,OAAO;MACLC,QAAQ,EAAE,IADL;MAELC,QAAQ,EAAE;IAFL,CAAP;EAID,CATY;;EAUbC,OAAO,EAAE;IACPC,aAAa,CAACC,CAAD,EAAI;MACf,KAAKC,YAAL,GAAoBD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAApB;IACD,CAHM;;IAIPC,gBAAgB,GAAG;MACjB,MAAMC,QAAO,GAAI,IAAIC,QAAJ,EAAjB;MACAD,QAAQ,CAACE,MAAT,CAAgB,IAAhB,EAAsB,KAAKC,IAAL,CAAUC,EAAhC;MACAJ,QAAQ,CAACE,MAAT,CAAgB,KAAhB,EAAuB,KAAKX,QAAL,CAAcc,GAArC;MACAL,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAA0B,KAAKX,QAAL,CAAce,MAAxC;MACAN,QAAQ,CAACE,MAAT,CAAgB,aAAhB,EAA+B,KAAKX,QAAL,CAAcgB,WAA7C;;MAEA,IAAI,KAAKX,YAAL,IAAqB,IAAzB,EAA+B;QAC7BI,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyB,KAAKV,QAA9B,EAAwC,KAAKA,QAAL,CAAcL,IAAtD;MACF;;MAEAF,KAAI,CACDuB,GADH,CACO,2CADP,EACoDR,QADpD,EAC8Dd,MAD9D,EAEGuB,IAFH,CAESC,QAAD,IAAc;QAClB,IAAIA,QAAQ,CAACC,MAAT,IAAmB,GAAvB,EAA4B;UAC1BC,OAAO,CAACC,GAAR,CAAYH,QAAZ;QACF;MACD,CANH,EAOGI,KAPH,CAOUC,GAAD,IAASH,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAPlB;IAQD;;EAvBM,CAVI;;EAmCbC,OAAO,GAAG;IACR,KAAKzB,QAAL,GAAgB,KAAKY,IAArB;EACD;;AArCY,CAAf","names":["axios","config","name","props","emits","data","userInfo","formFile","methods","onUploadImage","e","postFileEdit","target","files","onUpdateUserInfo","formData","FormData","append","user","id","nom","prenom","description","put","then","response","status","console","log","catch","err","created"],"sourceRoot":"","sources":["C:\\Users\\Wilfre\\Desktop\\OC P7\\front-end\\src\\views\\SettingsView.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-content\">\r\n    <form v-if=\"userInfo\" class=\"settings-form\">\r\n      <h3>Paramètres de {{ user.prenom }}</h3>\r\n      <h5>Nom</h5>\r\n      <input\r\n        class=\"settings-input\"\r\n        v-model=\"userInfo.nom\"\r\n        type=\"text\"\r\n        placeholder=\"nom\"\r\n      />\r\n      <h5>Prénom</h5>\r\n      <input\r\n        class=\"settings-input\"\r\n        v-model=\"userInfo.prenom\"\r\n        type=\"text\"\r\n        placeholder=\"prenom\"\r\n      />\r\n      <h5>Description</h5>\r\n      <textarea\r\n        class=\"settings-input\"\r\n        v-model=\"userInfo.description\"\r\n        placeholder=\"description\"\r\n      />\r\n      <div class=\"settings-picture\">\r\n        <h5>Image de profil</h5>\r\n        <input @change=\"onUploadImage\" type=\"file\" accept=\".jpg,.jpeg,.png\" />\r\n        <img\r\n          v-if=\"user.profilePic\"\r\n          v-bind:src=\"`${user.profilePic}`\"\r\n          alt=\"Utilisateur {{user.prenom}} {{user.nom}}\"\r\n        />\r\n      </div>\r\n      <button class=\"btn\" @click.prevent=\"onUpdateUserInfo\">\r\n        Modifier les informations\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport config from \"../axios-config\";\r\n\r\nexport default {\r\n  name: \"SettingsView\",\r\n  props: [\"user\"],\r\n  emits: [\"update-user\"],\r\n  data() {\r\n    return {\r\n      userInfo: null,\r\n      formFile: null,\r\n    };\r\n  },\r\n  methods: {\r\n    onUploadImage(e) {\r\n      this.postFileEdit = e.target.files[0];\r\n    },\r\n    onUpdateUserInfo() {\r\n      const formData = new FormData();\r\n      formData.append(\"id\", this.user.id);\r\n      formData.append(\"nom\", this.userInfo.nom);\r\n      formData.append(\"prenom\", this.userInfo.prenom);\r\n      formData.append(\"description\", this.userInfo.description);\r\n\r\n      if (this.postFileEdit != null) {\r\n        formData.append(\"image\", this.formFile, this.formFile.name);\r\n      }\r\n\r\n      axios\r\n        .put(\"http://localhost:8000/api/user/updateuser\", formData, config)\r\n        .then((response) => {\r\n          if (response.status == 200) {\r\n            console.log(response);\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n  },\r\n  created() {\r\n    this.userInfo = this.user;\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module"}