{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"page-content\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"settings-form\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"h5\", null, \"Nom\", -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h5\", null, \"Prénom\", -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"h5\", null, \"Description\", -1\n/* HOISTED */\n);\n\nconst _hoisted_6 = {\n  class: \"settings-picture\"\n};\n\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"h5\", null, \"Image de profil\", -1\n/* HOISTED */\n);\n\nconst _hoisted_8 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$props.user ? (_openBlock(), _createElementBlock(\"form\", _hoisted_2, [_createElementVNode(\"h3\", null, \"Paramètres de \" + _toDisplayString($props.user.prenom), 1\n  /* TEXT */\n  ), _hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    class: \"settings-input\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.userNom = $event),\n    type: \"text\",\n    placeholder: \"nom\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.userNom]]), _hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n    class: \"settings-input\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.userPrenom = $event),\n    type: \"text\",\n    placeholder: \"prenom\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.userPrenom]]), _hoisted_5, _withDirectives(_createElementVNode(\"textarea\", {\n    class: \"settings-input\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.userDescription = $event),\n    placeholder: \"description\"\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $data.userDescription]]), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createElementVNode(\"input\", {\n    onChange: _cache[3] || (_cache[3] = (...args) => $options.onUploadImage && $options.onUploadImage(...args)),\n    type: \"file\",\n    accept: \".jpg,.jpeg,.png\"\n  }, null, 32\n  /* HYDRATE_EVENTS */\n  ), $props.user.profilePic ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    src: `${$props.user.profilePic}`,\n    alt: \"Utilisateur {{user.prenom}} {{user.nom}}\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_8)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"button\", {\n    class: \"btn\",\n    onClick: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.onUpdateUserInfo && $options.onUpdateUserInfo(...args), [\"prevent\"]))\n  }, \" Modifier les informations \")])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"mappings":";;EACOA,KAAK,EAAC;;;;EACSA,KAAK,EAAC;;;gCAEtBC,oBAAY,IAAZ,EAAY,IAAZ,EAAI,KAAJ,EAAO;AAAA;AAAP;;gCAOAA,oBAAe,IAAf,EAAe,IAAf,EAAI,QAAJ,EAAU;AAAA;AAAV;;gCAOAA,oBAAoB,IAApB,EAAoB,IAApB,EAAI,aAAJ,EAAe;AAAA;AAAf;;;EAMKD,KAAK,EAAC;;;gCACTC,oBAAwB,IAAxB,EAAwB,IAAxB,EAAI,iBAAJ,EAAmB;AAAA;AAAnB;;;;uBAxBNC,oBAoCM,KApCN,cAoCM,CAnCQC,6BAAZD,oBAkCO,MAlCP,cAkCO,CAjCLD,oBAAwC,IAAxC,EAAwC,IAAxC,EAAI,mBAAcG,iBAAGD,YAAKE,MAAR,CAAlB,EAAgC;EAAA;EAAhC,CAiCK,EAhCLC,UAgCK,kBA/BLL,oBAKE,OALF,EAKE;IAJAD,KAAK,EAAC,gBAIN;+DAHSO,gBAAOC,OAGhB;IAFAC,IAAI,EAAC,MAEL;IADAC,WAAW,EAAC;EACZ,CALF;;EAAA,kBAEWH,gBA6BN,EAzBLI,UAyBK,kBAxBLV,oBAKE,OALF,EAKE;IAJAD,KAAK,EAAC,gBAIN;+DAHSO,mBAAUC,OAGnB;IAFAC,IAAI,EAAC,MAEL;IADAC,WAAW,EAAC;EACZ,CALF;;EAAA,kBAEWH,mBAsBN,EAlBLK,UAkBK,kBAjBLX,oBAIE,UAJF,EAIE;IAHAD,KAAK,EAAC,gBAGN;+DAFSO,wBAAeC,OAExB;IADAE,WAAW,EAAC;EACZ,CAJF;;EAAA,kBAEWH,wBAeN,EAZLN,oBAQM,KARN,cAQM,CAPJY,UAOI,EANJZ,oBAAsE,OAAtE,EAAsE;IAA9Da,QAAM,yCAAEC,yDAAF,CAAwD;IAAvCN,IAAI,EAAC,MAAkC;IAA3BO,MAAM,EAAC;EAAoB,CAAtE;;EAAA,CAMI,EAJIb,YAAKc,4BADbf,oBAIE,KAJF,EAIE;UAAA;IAFOgB,GAAG,KAAKf,YAAKc,UAAU,EAE9B;IADAE,GAAG,EAAC;EACJ,CAJF;;EAAA,kDAKI,CARN,CAYK,EAHLlB,oBAES,QAFT,EAES;IAFDD,KAAK,EAAC,KAEL;IAFYoB,OAAK,wDAAUL,+DAAV,EAA0B,WAA1B;EAEjB,CAFT,EAAsD,6BAAtD,CAGK,CAlCP,sCAmCI,CApCN","names":["class","_createElementVNode","_createElementBlock","$props","_toDisplayString","prenom","_hoisted_3","$data","$event","type","placeholder","_hoisted_4","_hoisted_5","_hoisted_7","onChange","$options","accept","profilePic","src","alt","onClick"],"sourceRoot":"","sources":["C:\\Users\\Wilfre\\Desktop\\OC P7\\front-end\\src\\views\\SettingsView.vue"],"sourcesContent":["<template>\r\n  <div class=\"page-content\">\r\n    <form v-if=\"user\" class=\"settings-form\">\r\n      <h3>Paramètres de {{ user.prenom }}</h3>\r\n      <h5>Nom</h5>\r\n      <input\r\n        class=\"settings-input\"\r\n        v-model=\"userNom\"\r\n        type=\"text\"\r\n        placeholder=\"nom\"\r\n      />\r\n      <h5>Prénom</h5>\r\n      <input\r\n        class=\"settings-input\"\r\n        v-model=\"userPrenom\"\r\n        type=\"text\"\r\n        placeholder=\"prenom\"\r\n      />\r\n      <h5>Description</h5>\r\n      <textarea\r\n        class=\"settings-input\"\r\n        v-model=\"userDescription\"\r\n        placeholder=\"description\"\r\n      />\r\n      <div class=\"settings-picture\">\r\n        <h5>Image de profil</h5>\r\n        <input @change=\"onUploadImage\" type=\"file\" accept=\".jpg,.jpeg,.png\" />\r\n        <img\r\n          v-if=\"user.profilePic\"\r\n          v-bind:src=\"`${user.profilePic}`\"\r\n          alt=\"Utilisateur {{user.prenom}} {{user.nom}}\"\r\n        />\r\n      </div>\r\n      <button class=\"btn\" @click.prevent=\"onUpdateUserInfo\">\r\n        Modifier les informations\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport config from \"../axios-config\";\r\n\r\nexport default {\r\n  name: \"SettingsView\",\r\n  props: [\"user\"],\r\n  emits: [\"update-user\"],\r\n  data() {\r\n    return {\r\n      userNom: \"\",\r\n      userPrenom: \"\",\r\n      userDescription: \"\",\r\n      formFile: null,\r\n    };\r\n  },\r\n  methods: {\r\n    onUploadImage(e) {\r\n      this.formFile = e.target.files[0];\r\n    },\r\n    onUpdateUserInfo() {\r\n      const formData = new FormData();\r\n      formData.append(\"id\", this.user.id);\r\n      formData.append(\"nom\", this.userNom);\r\n      formData.append(\"prenom\", this.userPrenom);\r\n      formData.append(\"description\", this.userDescription);\r\n\r\n      if (this.formFile != null) {\r\n        formData.append(\"image\", this.formFile, this.formFile.name);\r\n      }\r\n\r\n      axios\r\n        .put(\"http://localhost:8000/api/user/updateuser\", formData, config)\r\n        .then((response) => {\r\n          if (response.status == 200) {\r\n            const userData = {\r\n              id: response.data.id,\r\n              nom: response.data.nom,\r\n              prenom: response.data.prenom,\r\n              description: response.data.description,\r\n              profilePic: response.data.profilePic,\r\n              isImageEdited: response.isImageEdited,\r\n            };\r\n\r\n            this.$emit(\"update-user\", userData);\r\n            console.log(response);\r\n          }\r\n        })\r\n        .catch((err) => console.log(err));\r\n    },\r\n  },\r\n  created() {\r\n    this.userNom = this.user.nom;\r\n    this.userPrenom = this.user.prenom;\r\n    this.userDescription = this.user.description;\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module"}